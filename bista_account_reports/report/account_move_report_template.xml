<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
     <template id="account_move_form_header_footer">
        <div class="header">

            <t t-if="doc and 'company_id' in doc">
                 <t t-set="company" t-value="doc.company_id.sudo()" />
             </t>
             <t t-if="not doc or not 'company_id' in doc">
                 <t t-set="company" t-value="res_company" />
             </t>
            <div class="row mb8">
                <div class="col-6">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" alt="Logo"
                    height="150"/>
                </div>
                <div class="col-6 text-right mb4">
                    <div name="company_address" class="mb4">
                        <ul class="list-unstyled">
                        <strong><li t-if="company.name"><span t-esc="company.name"/></li></strong>
                        <li t-if="company.street"><span t-field="company.street"/></li>
                        <li t-if="company.state_id">
                            <span t-field="company.state_id.name"/>
                            <t t-if="company.country_id">
                                , <span t-esc="company.country_id.name"/>
                            </t>
                        </li>
                        <li t-if="company.zip">P.O Box <span t-field="company.zip"/></li>
                        <li t-if="company.phone">Telephone : <span t-field="company.phone"/></li>
                        <li t-if="company.email">Email : <span t-field="company.email"/></li>
                        <li t-if="company.vat">TRN : <span t-field="company.vat"/></li>
                        </ul>
                    </div>
                </div>
            </div>
            </div>
        <div class="article" t-att-data-oe-model="doc and doc._name" t-att-data-oe-id="doc and doc.id" t-att-data-oe-lang="doc and doc.env.context.get('lang')">
          <t t-raw="0"/>
        </div>
    </template>

        <template id="account_move_report_documents">
            <t t-call="bista_account_reports.account_move_form_header_footer">
                <div class="page">
                    <t t-set="currency_id" t-value="o.company_id.currency_id"/>
                    <t t-set="lang" t-value="request.env['res.lang'].sudo().search([('code','=',user.lang)],limit=1)"/>
                    <t t-set="fmt" t-value='"%.{0}f".format(currency_id.decimal_places)'/><br/><br/>
                    <h4>
                        <span t-field="o.name"/>
                    </h4>
                    <div>
                        <b>Date : </b>
                        <span t-field="o.date"/> <br/>
                        <b>Journal : </b>
                         <span t-field="o.journal_id"/> <br/>
                         <b>Reference : </b>
                         <span t-field ="o.ref"/>
                    </div>

                    <table class="table table-condensed" name="invoice_line_table" style="margin-top:30px;">
                        <thead>
                            <tr>
                                <th>Account</th>
                                <th>Partner</th>
                                <th>Label</th>
                                <th class="text-right">Debit</th>
                                <th class="text-right">Credit</th>
                            </tr>
                        </thead>
                        <tbody class="move_tbody">
                            <tr t-foreach="o.line_ids" t-as="l">
                                <td>
                                    <span t-field="l.account_id"/>
                                </td>
                                <td>
                                    <span t-field="l.partner_id"/>
                                </td>
                                <td>
                                    <span t-field="l.name"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="lang.format(fmt,l.debit,grouping=True)"/>
                                </td>
                                <td class="text-right">
                                    <span t-esc="lang.format(fmt,l.credit,grouping=True)"/>
                                </td>
                            </tr>

                            <tr>
                                <td colspan="3"></td>
                                <td class="text-right" style="font-weight:bold;">
                                    <span t-esc="lang.format(fmt,sum(o.line_ids.mapped('debit')),grouping=True)"/>
                                 </td>
                                <td class="text-right" style="font-weight:bold;">
                                    <span t-esc="lang.format(fmt,sum(o.line_ids.mapped('credit')),grouping=True)"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </t>
        </template>

        <template id="account_move_report_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="bista_account_reports.account_move_report_documents"/>
                </t>
            </t>
        </template>

    </data>
</odoo>