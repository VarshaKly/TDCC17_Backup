<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="view_receipt_payment_form" model="ir.ui.view">
		<field name="name">receipt.commission.form</field>
		<field name="model">account.payment</field>
		<field name="arch" type="xml">
			<form string="Register Payment">
				<sheet>
					<group>
						<field name="payment_type" invisible="1" />
						<field name="partner_type" invisible="1" />
						<field name="partner_id" invisible="1" />
						<field name="state" invisible="1" />
						<group>
							<label for="amount" />
							<div name="amount_div" class="o_row">
								<field name="amount" />
							</div>
							<field name="receipt_commission_id" invisible="1" />
							<field name="journal_id" widget="selection"
								attrs="{'invisible': [('amount', '=', 0)]}" />
							<field name="payment_method_id" widget="radio"
								attrs="{'invisible': [('amount', '=', 0.0)]}" />
						</group>
						<group>
							<field name="payment_date" />
							<field name="communication" />
						</group>
					</group>
				</sheet>
				<footer>
					<button string='Validate'
						name="action_validate_receipt_commission_payment" type="object"
						class="btn-primary" />
					<button string="Cancel" class="btn-secondary"
						special="cancel" />
				</footer>
			</form>
		</field>
	</record>

	<record id="action_receipt_commission_payment"
		model="ir.actions.act_window">
		<field name="name">Register Payment</field>
		<field name="res_model">account.payment</field>
		<field name="view_type">form</field>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_receipt_payment_form" />
		<field name="context">{'default_receipt_commission_id': active_id}</field>
		<field name="target">new</field>
	</record>

	<!-- Tree view : Receipt Commissions -->
	<record model="ir.ui.view" id="tdcc_receipt_commission_tree">
		<field name="name">Receipt Commissions</field>
		<field name="model">receipt.commission</field>
		<field name="arch" type="xml">
			<tree string="Receipt Commissions" create="false" delete="false">
				<field name="partner_id" string="Salesperson" />
				<field name="amount" sum="Total Amount" />
				<field name="state" />
			</tree>
		</field>
	</record>

	<!-- Form view : Receipt Commissions -->
	<record model="ir.ui.view" id="tdcc_receipt_commission_form">
		<field name="name">Receipt commissions</field>
		<field name="model">receipt.commission</field>
		<field name="arch" type="xml">
			<form string="Receipt Commission" create="false" edit="false"
				delete="false">
				<header>
					<button name="%(action_receipt_commission_payment)d"
						type="action" string="Register Payment" states="unpaid"
						class="oe_highlight" />
					<field name="state" widget="statusbar" />
				</header>
				<sheet>
					<div class="oe_button_box" name="button_box">
						<button class="oe_stat_button"
							name="action_view_receipt_commission_payment"
							string="View Payment" type="object" states="paid" icon="fa-money" />
					</div>
					<div>
						<h1 class="mt0">
							<field name="partner_id" class="oe_inline" readonly="1" />
						</h1>
					</div>
					<group>
						<group invisible="1">
							<field name="commission_line_id" />
							<field name="start_date" />
							<field name="end_date" />
						</group>
						<group>
							<field name="date" />
							<field name="amount" />
						</group>
					</group>
				</sheet>
			</form>
		</field>
	</record>

	<!-- Action : Receipt Commissions -->
	<record model="ir.actions.act_window"
		id="action_receipt_commission">
		<field name="name">Commission Payable</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">receipt.commission</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
	</record>


	<!-- Menu : Receipt Commission -->
	<menuitem id="menu_receipt_commission"
		parent="bista_tdcc_commission.menu_sales_commissions_management"
		action="action_receipt_commission" sequence="10" />
</odoo>
