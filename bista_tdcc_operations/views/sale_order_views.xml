<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_order_form_tdcc" model="ir.ui.view">
        <field name="name">sale.order.form.inherit</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='payment_term_id']" position="after">
                <field name="program_type" invisible="0"/>
            </xpath>
            <xpath expr="//sheet/div[@name='button_box']" position="inside">
                <button name="action_view_appointment" type="object" class="oe_stat_button"
                            icon="fa-calendar" attrs="{'invisible': ['|',('program_type','!=', '360'),
                                                                    ('appointment_count', '=', 0)]}">
                    <field name="appointment_count" widget="statinfo" string="Appointments" />
                </button>
            </xpath>
            <xpath expr="//field[@name='order_line']/form/group/group/field[@name='product_id']"
                   position="before">
                <field name="service_type_id"
                       options="{'no_create_edit': True}"/>
                <field name="appointment_date"
                 attrs="{'invisible': [('parent.program_type', '!=', '360')],
                        'required': [('parent.program_type', '=', '360')]}"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/form/group/group/label[@for='product_uom_qty']"
                   position="attributes">
                   <attribute name="string">Duration</attribute>
            </xpath>
            <field name="payment_term_id" position="after">
                 <field name="payment_info"/>
            </field>
            <xpath expr="//field[@name='order_line']/tree/field[@name='product_id']"
                   position="before">
                <field name="service_type_id"
                       options="{'no_create_edit': True}"/>
               <!--  <field name="appointment_date"
                    attrs="{'column_invisible': [('parent.program_type', '!=', '360')],
                           'required': [('parent.program_type', '=', '360')]}"/> -->
            </xpath>
            <xpath expr="//field[@name='order_line']/tree/field[@name='product_uom_qty']"
                   position="attributes">
               <attribute name="string">Duration</attribute>
            </xpath>
            <xpath expr="//notebook/page[@name='other_information']/group/group[@name='sales_person']"
                   position="after">
                <group string="Program Details"
                       attrs="{'invisible': [('program_type', '!=', 'eip')]}">
                    <field name="class_id"
                           attrs="{'invisible': [('program_type', '!=', 'eip')]}"
                           options="{'no_create_edit': True}"/>
                </group>
            </xpath>
            <xpath expr="//notebook/page[@name='other_information']/group/group[@name='sales_person']/field[@name='team_id']"
                   position="after">
                <field name="finance_administrator"/>
            </xpath>
        </field>
    </record>

    <record id="sale_order_view_form_tdcc_hide_btn" model="ir.ui.view">
        <field name="name">sale.order.hide.button</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale_management.sale_order_view_form"/>
        <field name="arch" type="xml">
            <xpath
                    expr="//button[@name='%(sale.action_view_sale_advance_payment_inv)d']"
                    position="attributes">
                <attribute name='attrs'>{'invisible': ['|',('invoice_status',
                    '!=', 'to invoice'),('program_type', '=', '360')]}
                </attribute>
            </xpath>
        </field>
    </record>

    <menuitem id="sale.sale_menu_root" name="Sales" groups="sales_team.group_sale_salesman"/>

</odoo>
